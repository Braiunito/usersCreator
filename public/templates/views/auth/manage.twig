{% extends "base.html" %}

{% block head %}
<script type="module" src="/templates/assets/js/commonFunctions.js"></script>
<script type="module" src="/templates/assets/js/deleteManageUserAjax.js"></script>
<script type="module" src="/templates/assets/js/editManageUserAjax.js"></script>
<script type="module" src="/templates/assets/js/pagerManageUserAjax.js"></script>
{% endblock %}



{% block content %}

<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="Confrim delete" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Delete user</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Are you sure that you want to delete this user?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
        <div data-id="user-id" class="btn btn-primary user-confirm-delete">Yes</div>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="Confrim update" aria-hidden="true"><div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Update user</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p> The fields that you keep empty will preserve the original data.</p>
      
        <table class="table table-dark">
            <thead>
                <tr>
                    <th scope="col">NAME</th>
                    <th scope="col">LAST NAME</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td> <input class="form-name" type="text" value=""></td>
                    <td> <input class="form-lastname" type="text" value=""></td>
                </tr>
            </tbody>
            <thead>
                <tr>
                    <th scope="col">EMAIL</th>
                    <th scope="col">PASSWORD</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td> <input type="email" class="form-email" type="text" value=""></td>
                    <td> <input class="form-pass" type="text" value=""></td>
                </tr>
            </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <div data-id="user-id" class="btn btn-primary user-confirm-edit">Update</div>
      </div>
    </div>
  </div>
</div>


<h1 class="pb-3">Welcome to manage section {{ user.username }}!</h1>
<div class="d-none" role="alert" id="manageMsg">GG ez</div>
<div class="usersTable truncate">
    <table class="table table-dark">
        <thead>
            <tr>
                <th scope="col">ID</th>
                <th scope="col">NAME</th>
                <th scope="col">LAST NAME</th>
                <th scope="col">EMAIL</th>
                <th scope="col">REGISTRATION</th>
                <th scope="col">OPTION</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr class="user-manage-row" data-id="{{ user.id }}" id="user-{{ user.id }}">
                    <td class="id" scope="row">{{ user.id }}</td>
                    <td class="firstname">{{ user.firstname }}</td>
                    <td class="lastname">{{ user.lastname }}</td>
                    <td class="email">{{ user.email }}</td>
                    <td class="reg_date"> {{ user.reg_date }}</td>
                    <td class="d-flex">
                        <button type="button" class="btn btn-danger delete-button mr-3" data-user="{{ user.id }}" data-toggle="modal" data-target="#deleteModal">
                            <i class="fas fa-times-circle"></i>
                        </button>
                        <button type="button" class="btn btn-success edit-button mr-3" data-user="{{ user.id }}" data-toggle="modal" data-target="#editModal">
                            <i class="far fa-edit"></i>
                        </button>
                    </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div class="pager d-flex justify-content-center align-items-center" style="color: white;">
    
    <nav aria-label="...">
      <ul class="pagination">
        {% for i in 0..(counters.amount) %}
          {% if counters.current == i %}
            <li class="page-item active"><a class="page-link" href="?page={{i}}">{{i}} <span class="sr-only">(current)</span></a></li>
          {% else %}
            <li class="page-item"><a class="page-link" href="?page={{i}}">{{i}}</a></li>
          {% endif %}
        {% endfor %}
      </ul>
    </nav>


    </div>
</div>
{% endblock %}